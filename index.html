<html lang="en">
<style>
.container { margin: 40px auto; width: 80%; }
.button { width: 160px; height: 45px; border-radius: 6px; font-size: 15px; margin-top: 20px; }
hr { width: 400px; margin-left: 0; }
h3 { display: inline-block; }
#container { display: none; }
#container-edit { display: none; }
#container-edit input { height: 32px; width: 195px; font-size: 15px; }
</style>

<script>
(async function init() {
    const res = await fetch('/get-profile');
    const user = await res.json();

    document.getElementById('name').textContent = user.name || 'Allen';
    document.getElementById('email').textContent = user.email || 'abc@Wbc';

    document.getElementById('container').style.display = 'block';
})();

async function handleUpdateProfileRequest() {
    const payload = {
        name: document.getElementById('input-name').value,
        email: document.getElementById('input-email').value
    };

    const res = await fetch('/update-profile', {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
    });

    const data = await res.json();

    document.getElementById('name').textContent = data.name;
    document.getElementById('email').textContent = data.email;

    document.getElementById('container').style.display = 'block';
    document.getElementById('container-edit').style.display = 'none';
}

function updateProfile() {
    document.getElementById('input-name').value =
        document.getElementById('name').textContent;
    document.getElementById('input-email').value =
        document.getElementById('email').textContent;

    document.getElementById('container').style.display = 'none';
    document.getElementById('container-edit').style.display = 'block';
}
</script>

<body>
<div class='container' id='container'>
    <h1>Contact Form</h1>
    <span>Name: </span><h3 id='name'>Allen</h3>
    <hr />
    <span>Email: </span><h3 id='email'>abc@Wbc</h3>
    <hr />
    <button class='button' onclick="updateProfile()">Edit</button>
</div>

<div class='container' id='container-edit'>
    <h1>Edit Contact</h1>
    <span>Name: </span><input type="text" id='input-name' />
    <hr />
    <span>Email: </span><input type="email" id='input-email' />
    <hr />
    <button class='button' onclick="handleUpdateProfileRequest()">Save</button>
</div>
</body>
</html>

